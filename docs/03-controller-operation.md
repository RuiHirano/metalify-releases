# コントローラー操作ガイド

このドキュメントでは、Metalifyコントローラーの操作方法、バックテストの進め方、注文の実行方法、よくある質問をまとめています。

## 目次

1. [操作パネルの使い方](#操作パネルの使い方)
2. [バックテストの進め方](#バックテストの進め方)
3. [スピードを変更する](#スピードを変更する)
4. [注文を行う](#注文を行う)
5. [よくあるご質問](#よくあるご質問)

---

## 操作パネルの使い方

Metalifyアプリの操作パネルは、MetaTrader4 (MT4) のバックテスト中に各種操作を簡単かつ効率的に行うためのインターフェースとして設計されています。本ガイドでは、操作パネルの主要な機能とその概要を紹介します。

### 操作パネルの概要

操作パネルは、以下の4つの主要な部分で成り立っています。

| 名称               | 説明                                           |
| :----------------- | :--------------------------------------------- |
| **プレイヤー**     | バックテストの進行を制御する                   |
| **注文パネル**     | 注文の発注や変更、決済などを行う               |
| **ポジション一覧** | 発注中の注文や保有中のポジションを一覧表示する |
| **EAとの接続表示** | EAとの接続状況を表示する                       |

### プレイヤー

プレイヤーは、バックテストの進行速度を調整したり、進行を一時停止したり再開することができます。速度は0.2から1.0までの5段階で調整可能です。ストラテジーテスターの停止ボタンを使うと、停止中に注文が発注できなくなるため、プレイヤーの停止ボタンの使用が推奨されます。

詳細な手順については、[スピードを変更する](#スピードを変更する)を参照してください。

### 注文パネル

注文パネルでは、新しい注文の発注や既存の注文・ポジションの変更・削除が行えます。また、指値や逆指値の注文、SLやTPの設定も行うことができます。

詳細な手順については、[注文を行う](#注文を行う)を参照してください。

### ポジション一覧

このセクションでは、現在の注文や保有ポジションが一覧表示されます。注文やポジションをクリックすることで、該当のポジションや注文の詳細表示や変更、キャンセルなどの操作が行えます。

詳細な手順については、[注文を行う](#注文を行う)を参照してください。

### EAとの接続表示

ヘッダー部分にある通信アイコンを通じて、EAとの接続状況を確認できます。正常に接続されている場合は緑のアイコン、未接続の場合はグレーのアイコンが表示されます。

#### 操作パネルの接続マークがオンになりません

操作パネルの接続マークがオンになるのは、EAがエラーなく実行されている場合です。EAが実行されていなかったり、エラーで終了している場合、接続マークがオンにならないことがあります。ストラテジーテスターの「操作履歴」タブからエラーメッセージを確認し、エラーが発生している場合はエラーの解決を行ってください。

---

## バックテストの進め方

### 1. バックテストの基本的な進め方

バックテストを行うためには、以下の手順に従って進めてください。

> [!TIP]
> 多くの裁量トレーダーは、以下のような手順でバックテストを行うと思います。Metalifyアプリを使用する際も、この手順に従ってバックテストを行うことをお勧めします。
>
> 1. **チャートの進行を停止**して、エントリータイミングを分析します。
> 2. **エントリータイミングに合わせて注文**を行います。
> 3. **適度な速度でチャートを進行**させ、トレーリング、決済などを行います。
> 4. **次のエントリータイミングが来るまでチャートを進行**し、エントリータイミングを探ります

#### 分析または注文を行う場合

1. プレイヤーボタンを操作して、**チャートの進行を停止します。**
2. チャートを分析し、注文を行う場合は、注文パネルを使用して注文を行います。必要に応じて**MT4チャート上の価格設定ラインをドラッグ**して、注文価格を調整することもできます。
3. 注文パネルで注文を確定すると、チャート上に注文情報が表示されます。
4. 決済まで**適度な速度でチャートを進行させ**、トレーリング、決済などを行います。

#### チャートを早送りする場合

1. プレイヤーボタンを操作して、**チャートの進行を再生します。**
2. チャートの進行速度を調整し、次のエントリータイミングまでチャートを進行させます。
3. エントリータイミングに合わせて、**チャートを停止し、注文を行います。**

### 2. 動画で確認する

以下のリンクから基本的なバックテストの進め方を動画で確認することができます。

[バックテストの動画で確認する](https://metalify-fx.com "バックテストの進め方")

---

## スピードを変更する

バックテスト中のチャート進行速度は、効率的なテストのために適切に調整することが重要です。Metalifyアプリの操作パネルのプレイヤー部分を使用することで、スピードの変更や一時停止などの操作が容易に行えます。

### 停止と再開

1. **停止ボタン**: バックテストの進行を一時停止するためのボタンです。クリックすると、進行が即時に停止します。
2. **再開ボタン**: 停止したバックテストの進行を再開するためのボタンです。クリックすると、進行が再開されます。

> [!CAUTION]
> MT4のストラテジーテスター部分にも再生/停止ボタンがありますが、これを使用すると停止中に新しい注文を発注できなくなります。そのため、**ストラテジーテスターの再生/停止ボタンは常に再生にして、Metalifyアプリのプレイヤー部分の再生/停止ボタンで制御することが推奨します。**

### スピード調整

操作パネルのプレイヤー部分には、スピード調整ボタンが用意されています。以下の手順でスピードを調整できます。

1. スピード調整ボタン: これを使用して、進行速度を0.2から1.0の間で5段階に調整できます。
2. エントリーするタイミングに近づいた場合、スピードをゆっくりに設定して詳細な動きを確認することができます。
3. エントリーするタイミングではない場合や、特定の時間帯を高速でスキップしたい場合は、スピードを高く設定することができます。

これにより、エントリーやエグジットのタイミングを正確に確認することができますし、不要な時間帯は高速で進行させることで効率的なバックテストが行えます。

---

スピードの調整をマスターすることで、より効率的かつ正確なバックテストが可能となります。各タイミングやシチュエーションに応じて、適切なスピードでテストを進行させることを心掛けましょう。

---

## 注文を行う

Metalifyアプリの操作パネルには、新しい注文の発注から、既存の注文やポジションの変更、削除までを行う「注文パネル」が含まれています。

> [!TIP]
> 注文を行う前に、Metalify操作パネルの「プレイヤー」部分の再生/停止ボタンを停止状態にしておくことをお勧めします。

### 新規注文

#### 1. 成り行き注文

1. 注文パネルで「成行」を選択します。
2. 必要なLot数を入力します。
3. 「買い」または「売り」ボタンをクリックして注文を確定します。

#### 2. 指値・逆指値注文

1. 注文パネルで「指値」または「逆指値」を選択します。
2. 注文価格とLot数を入力します。
3. 「買い」または「売り」ボタンをクリックして注文を確定します。
4. MT4上には注文価格を示す水平ラインが表示され、このラインをドラッグすることで注文価格を直接調整することも可能です。

#### 3. ストップロス・テイクプロフィット

1. ストップロス、テイクプロフィットのラジオボタンをオンにします。
2. 必要な価格を入力します。
3. MT4上にも価格を示す水平ラインが表示され、このラインをドラッグすることで価格を直接調整することができます。

#### 4. 便利な機能：注文価格やストップロス、テイクプロフィットなどの価格をMT4チャート上で直接調整する

MetalifyではMT4チャート上で水平線オブジェクトを動かすことで、ストップロスやテイクプロフィットの価格を直接調整することができます。この機能を使うことで、より正確かつ簡単に注文を行うことができます。

1. 注文時にプレイヤーボタンからチャートを停止します。
2. 注文パネルでストップロス、テイクプロフィットのチェックボックスをオンにします。
3. その状態でMT4のビジュアルチャートをクリックし、水平線オブジェクトを選択します。
4. 水平線をドラッグして、必要な価格に移動します。
5. 水平線を長押しして決定すると、注文パネルに反映されます。

> [!TIP]
> ストップロス/テイクプロフィットのチェックボックスをオンにするだけでは水平線は表示されません。MT4のビジュアルチャート上をクリックすることで水平線オブジェクトが表示されます。

### 注文の削除、変更

1. 注文・ポジション一覧から、削除または変更したい注文をクリックして選択します。
2. 注文パネルに選択した注文情報が表示されるので、必要な箇所（注文価格やSL/TP, Lotなど）を変更します。
3. 「変更」ボタンをクリックして変更を確定します。
4. もし注文を削除したい場合は、「削除」ボタンをクリックします。

### ポジションの決済、変更

1. 注文・ポジション一覧から、決済または変更したいポジションをクリックして選択します。
2. 注文パネルに選択したポジション情報が表示されるので、必要な箇所（SL/TP, Lotなど）を変更します。
3. 「変更」ボタンをクリックして変更を確定します。
4. もしポジションを決済したい場合は、決済したいLot数を入力し、「決済」ボタンをクリックます。

---

これで、Metalifyアプリの注文パネルの基本的な使い方について理解することができました。正確な注文操作を行うことで、効果的なバックテストや取引が可能となります。

---

## よくあるご質問

### 1. EAについて

#### ストラテジーテスター設定の「期間」の欄が見つかりません

期間の設定項目が見つからない場合、設定項目がテスター下部に隠れている可能性があります。テスター画面を上部に拡張すると表示されます。

#### 「-MTLF」のオフラインチャートが生成されません

「-MTLF」のオフラインチャートが生成されない場合、以下の原因が考えられます。

- 設定画面で同期チャートの設定がtrueになっていない
  - エキスパート設定画面でチャート設定が正しいか確認してください。
- EAが何かしらのエラーで終了している
  - ストラテジーテスターの「操作履歴」タブからエラーメッセージを確認し、エラーが発生している場合はエラーの解決を行ってください。

それでも解決しない場合、お手数ですが、[お問い合わせ](/support/contact)ページからご連絡ください。

#### オフラインチャートの生成はされるが、期間がバックテストと異なります

オフラインチャートの期間は、生成したオフラインチャートのシンボルと期間のヒストリーデータから生成されます（USDJPY-MTLF,H1であればUSDJPY,H1のヒストリーデータから生成されます）。そのため、該当のヒストリーデータの期間がバックテストの期間と異なる場合、オフラインチャートの期間も異なることがあります。
該当期間のヒストリーデータが不足している場合、「ツール」->「ヒストリーセンター」からヒストリーデータをダウンロードすることで解決する可能性があります。

#### EAがすぐに終了してしまいます

EAがすぐに終了する場合、以下の対応を行ってください。

- EAが何かしらのエラーで終了している
  - ストラテジーテスターの「操作履歴」タブからエラーメッセージを確認し、エラーが発生している場合はエラーの解決を行ってください。
- データが存在しない期間を指定している
  - バックテストの期間がヒストリーデータに存在しない期間を指定している場合、EAがすぐに終了することがあります。バックテストの期間をヒストリーデータに存在する期間に変更してください。
- 設定が間違っている
  - 最適化モードになっている、ビジュアルモードがオフになっている、などの設定が間違っている場合、EAがすぐに終了することがあります。設定を確認し、正しい設定に変更してください。

#### エラーコード138が発生し注文ができません

エラーコード138は注文時のスリッページが大きすぎることを示しています。EAの設定画面でスリッページの値を大きくすることで解決する可能性があります。

> [!CAUTION]
> 休日にEAを動かしている場合、休日のスプレッドが大きくなることがあります。その場合、ストラテジーテスターの**スプレッドの値を固定値に変更する**ことで解決する可能性があります。

#### ビジュアルモード、期間の設定項目が見つかりません

ビジュアルモード、期間の設定項目が見つからない場合、設定項目がテスターの表示部分に隠れている可能性があります。表示部分をスクロールするか画面拡張してみてください。

---

### 2. 操作パネルについて

#### ユーザーの認証に失敗します

ユーザーの認証に失敗する場合、以下の項目をご確認ください。

- メールアドレスとパスワードが正しいか
- プランが有効か
  - Metalifyウェブサイトの「プラン」からプランが有効になっているかご確認ください。

#### 操作パネルの接続マークがオンになりません

操作パネルの接続マークがオンになるのは、EAがエラーなく実行されている場合です。EAが実行されていなかったり、エラーで終了している場合、接続マークがオンにならないことがあります。ストラテジーテスターの「操作履歴」タブからエラーメッセージを確認し、エラーが発生している場合はエラーの解決を行ってください。

#### 操作アプリのインストール時にセキュリティの警告が表示されます

現状、Windowsのセキュリティ設定により、操作アプリのインストール時にセキュリティの警告が表示されることがあります。セキュリティの警告が表示された場合、「詳細を見る」ボタンをクリックし、インストールを続行してください。

---

### 3. 課金について

#### 課金の有効期間はいつからいつまでですか？

課金の有効期間は、プラン購入日またはプラン更新日から1ヶ月間です。プラン購入/更新日から1ヶ月が経過すると、自動的にプランが一ヶ月間更新されます。

#### プランをキャンセルした場合、すぐに利用できなくなりますか？

プランをキャンセルした場合、プランの有効期間が終了するまで利用できます。プランの有効期間が終了すると、プランの利用が停止されます。

---

### 4. その他のご質問

#### MetaTrader4をダウンロードしたらMetaTrader5がダウンロードされました

現在、[**MetaQuotes社の公式サイト**](https://www.metatrader4.com/ja/download)からMetaTrader4のダウンロードを行うと**MetaTrader5がダウンロードされる**という現象が発生しています。MetaTrader5ではMetalifyアプリは動作しませんので、ご注意ください。
MetaTrader4をダウンロードする場合は**XMTradingやOandaJapanなどのブローカーの公式サイトからダウンロードすること**を推奨します。

#### 自身のMT4インジケーターをMetalifyアプリで使用することはできますか？

Metalifyアプリでは、自身のMT4インジケーターを使用することは可能です。EAをテスターで実行し、表示されたチャートにインジケーターを追加することで、自身のMT4インジケーターを使用することができます。

---

> [!TIP]
> そのほかご不明な点がございましたら、お気軽に[お問い合わせ](/support/contact)ページからご連絡ください。
