# MT4の設定を行う

MetalifyアプリをMetaTrader4 (MT4) と連携させるためには、いくつかの設定が必要です。このガイドでは、その設定手順をステップバイステップで詳しく説明します。

## MetaTrader4(MT4)をダウンロードする

> [!CAUTION]
> 現在、[**MetaQuotes社の公式サイト**](https://www.metatrader4.com/ja/download)からMetaTrader4のダウンロードを行うと**MetaTrader5がダウンロードされる**という現象が発生しています。MetaTrader5ではMetalifyアプリは動作しませんので、ご注意ください。
>
> MetaTrader4をダウンロードする場合は**XMTradingやOandaJapanなどのブローカーの公式サイトからダウンロードすること**を推奨します。

## 1. MT4のツール、オプションからDLLを許可する

1. MT4を起動します。
2. メニューバーの上部にある「ツール」をクリックし、ドロップダウンから「オプション」を選択します。
3. オプションウィンドウが表示されるので、「エキスパートアドバイザー」タブをクリックします。
4. その中にある「DLLの使用を許可する」のチェックボックスをオンにします。
5. 「OK」をクリックして設定を保存します。

![AltText {priority}{768x432}](/img/allow_dll.png)

## 2. MT4データフォルダのパスを取得する

1. MT4のメニューバーの上部にある「ファイル」をクリックします。
2. ドロップダウンメニューから「データフォルダを開く」を選択します。
3. データフォルダがエクスプローラーで開かれるので、アドレスバーのパスをコピーしてメモします。

![AltText {priority}{768x432}](/img/data_folder_path_copy.png)

> [!NOTE]
> アドレスバーがコピーモードにならないときは、アドレスバーの右側の空白部分をクリックしてください。

> [!TIP]
> コピーしたい箇所を右クリックし、「コピーを選択すること(もしくはCtrlを押しながらCを押すこと)」でコピーできます。

## 3. Metalifyアプリの設定を開きメモしたパスを入力する

1. Metalifyアプリを起動します。
2. ヘッダー右上の設定アイコンをクリックし、設定セクションを開きます。
3. MT4のデータフォルダのパス入力欄に、先ほどメモしたパスをペーストします。
4. 正しいパスが入力されると、チェックマークが表示されます。正しくない場合はエラーメッセージが表示されるので、再度パスを確認してください。

![AltText {priority}{768x432}](/img/app_settings.ja.png)

> [!TIP]
> ペーストしたい箇所にフォーカスを当てた後、「右クリックしペーストを選択すること(もしくはCtrlを押しながらVを押すこと)」でペーストできます。

## 4. Metalifyアプリの設定から「EAをインストール」をクリックし、MT4にEAをインストールする

1. Metalifyアプリ内の「EAをインストール」ボタンをクリックします。
2. インストールが完了すると、確認のメッセージが表示されます。

## 5. MT4を再起動する

1. MT4を一度閉じます。
2. 再度、MT4を起動します。

## 6. ストラテジーテスターを開きMetalifyEA.ex4を指定しバックテストを実行する

1. MT4の下部にある「ストラテジーテスター」パネルを開きます。
2. 「エキスパートアドバイザー」のドロップダウンから「MetalifyEA.ex4」を選択します。
3. 必要な設定を行い、バックテストを開始するボタンをクリックしてバックテストを実行します。

EAの入力パラメーターについては、[**EAの入力設定**](/docs/ea-parameters)を参照してください。

![AltText {priority}{768x432}](/img/mt4_backtest.png)

---

これで、MetalifyアプリとMT4の連携設定は完了です。Metalifyアプリの操作パネルを使って、バックテスト中のチャートの進行や注文の発注、変更などの操作を効率的に行いましょう。
