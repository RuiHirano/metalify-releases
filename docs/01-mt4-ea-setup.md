# MT4設定・EA導入ガイド

このドキュメントでは、Metalifyの導入からMT4の設定、EAのインストールまでの全手順をまとめています。

## 目次

1. [Metalify 導入ガイド](#metalify-導入ガイド)
2. [プランを購読する](#プランを購読する)
3. [アプリを導入する](#アプリを導入する)
4. [MT4の設定を行う](#mt4の設定を行う)

---

## Metalify 導入ガイド

Metalifyの導入を始める前に、以下の手順に従ってセットアップを行いましょう。本ガイドでは、基本的な導入ステップを紹介します。

### 1. プランの購読

最初に、Metalifyのプランを購読する必要があります。

1. MetalifyのWebサイトにログインします。
2. サイドメニューから「プラン」を選択します。
3. 表示されたページで、ご希望のプランを購入します。

プランの詳細や購読方法については、[プランを購読する](#プランを購読する)を参照してください。

### 2. アプリの導入

次に、Metalifyのアプリケーションをダウンロードし、インストールします。

1. MetalifyのWebサイトからアプリをダウンロードします。
2. ダウンロードしたファイルを実行し、インストールを進めます。
3. インストールが完了したら、アプリを起動します。
4. 起動したアプリで、メールアドレスとパスワードを入力し、ログインします。

アプリの詳しいインストール方法や使い方については、[アプリを導入する](#アプリを導入する)を参照してください。

### 3. MetaTrader4の設定

MetalifyをMetaTrader4と連携させるための設定を行います。

1. MetaTrader4を起動します。
2. ツールメニューからオプションを選択します。
3. その中の「エキスパートアドバイザー」タブをクリックし、DLLの使用を許可するオプションを有効にします。

MetaTrader4の詳細設定や、Metalifyとの連携方法については、[MT4の設定を行う](#mt4の設定を行う)を参照してください。

---

これでMetalifyの基本的な導入は完了です。

---

## プランを購読する

Metalifyを最大限に活用するためには、プランの購読が必要です。プランを購読することで、Metalifyの機能を利用することができます。

### 1. Webサイトからログインを行う

1. [**Metalifyの公式Webサイト**](https://metalify-fx.com)にアクセスします。
2. 右上の「ログイン」ボタンをクリックします。
3. 既にユーザー登録を済ませている方は、登録時に使用したメールアドレスとパスワードを入力し、「ログイン」ボタンをクリックしてログインします。
4. まだユーザー登録をしていない方は、下部に表示される「新規登録」リンクをクリックし、ユーザー登録画面に移動します。必要な情報を入力し、指示に従ってユーザー登録を完了させます。その後、ログインを行います。

> [!NOTE]
> 2024年6月より認証方法がメールアドレスとパスワードに変更されました。以前の認証方法(ユーザーIDによる認証)でログインしていた方は、アカウントのメールアドレスとパスワードでログインしてください。

### 2. サイドメニューから「プラン」を選択する

1. ログイン後のダッシュボード画面に移動します。
2. 左側のサイドメニューから「プラン」という項目をクリックして、プランの管理ページにアクセスします。

### 3. カード情報を入力する

1. プランの申請欄からご希望のプランの「カード情報を入力する」ボタンをクリックします。
2. 表示されたカード情報の入力欄に必要な情報を入力します。
3. 入力欄下部の「カード情報を入力する」ボタンをクリックします。
4. 「カード情報入力済」という表示がされたら、カード情報の入力は完了です。

> [!WARNING]
> カード情報の入力でエラーが発生した場合は、入力内容を確認し、再度入力を行ってください。それでもエラーが解消されない場合は、[お問い合わせ](/support/contact)ページからご連絡ください。

> [!TIP]
> クレジットカードの情報は全て株式会社PAY.JPが保有し、Metalifyはカード情報を保有しておりません。安全にお支払いを行うことができます。

### 4. プランを購読する

1. カード情報入力後、「プランを購入する」ボタンをクリックします。
2. 「プランを購入します。よろしいですか」という確認画面が表示されます。プランの内容を確認し、問題がなければ「OK」ボタンをクリックします。
3. 「プランを購入しました」という表示がされ、ご利用中のプランに購読したプランが追加されます。

### 課金についてのよくある質問

#### 課金の有効期間はいつからいつまでですか？

課金の有効期間は、プラン購入日またはプラン更新日から1ヶ月間です。プラン購入/更新日から1ヶ月が経過すると、自動的にプランが一ヶ月間更新されます。

#### プランをキャンセルした場合、すぐに利用できなくなりますか？

プランをキャンセルした場合、プランの有効期間が終了するまで利用できます。プランの有効期間が終了すると、プランの利用が停止されます。

---

## アプリを導入する

Metalifyのアプリは、MetaTrader4(MT4)でのバックテスト中に、チャートの進行や注文の発注、変更などの操作を簡単に行える操作パネルとして設計されています。

### 1. サイドメニューから「ダウンロード」を選択

1. MetalifyのWebサイトにログインし、ダッシュボードにアクセスします。
2. 左側のサイドメニューから「ダウンロード」をクリックします。

### 2. MetalifyController.exeをダウンロードする

1. ダウンロードページには、異なるOS向けのインストーラーファイルが提供されています。
2. Windowsユーザーの方は「MetalifyController.exe」をクリックしてダウンロードします。

> [!NOTE]
> 現在MacOSやLinuxなどのOSはサポートしておりません。今後の対応については検討しております。

#### Windows Defender SmartScreenの警告を回避する手順

ダウンロード時にWindows Defender SmartScreenの警告が表示される場合があります。以下の手順で安全にダウンロードを完了できます。

**手順1: ダウンロード時に表示される警告で「...」ボタンをクリックし、「保存」を選択します。**

![Windows Defender SmartScreen 手順1](/img/howto_download_controller1_ja.png)

**手順2: 再度「...」ボタンをクリックし、「保持する」をクリックしてダウンロードを完了します。**

![Windows Defender SmartScreen 手順2](/img/howto_download_controller2_ja.png)

### 3. ダウンロード後、アプリをインストールし起動する

1. ダウンロードしたインストーラーファイルを開き、指示に従ってインストールを進めます。
2. インストールが完了したら、Metalifyのアプリアイコンをクリックして起動します。

### 4. 起動したら認証画面でメールアドレスとパスワードを入力する

1. アプリを初めて起動すると、認証画面が表示されます。
2. この画面で、メールアドレスとパスワードを入力します。
3. 入力が完了したら「ログイン」ボタンをクリックして、ログインします。

> [!NOTE]
> 2024年6月より認証方法がメールアドレスとパスワードに変更されました。以前の認証方法(ユーザーIDによる認証)でログインしていた方は、アカウントのメールアドレスとパスワードでログインしてください。

### 認証に関するよくある質問

#### ユーザーの認証に失敗します

ユーザーの認証に失敗する場合、以下の項目をご確認ください。

- メールアドレスとパスワードが正しいか
- プランが有効か
  - Metalifyウェブサイトの「プラン」からプランが有効になっているかご確認ください。

#### 操作アプリのインストール時にセキュリティの警告が表示されます

現状、Windowsのセキュリティ設定により、操作アプリのインストール時にセキュリティの警告が表示されることがあります。セキュリティの警告が表示された場合、「詳細を見る」ボタンをクリックし、インストールを続行してください。

### 5. MetaTrader4バックテスト中に使用する

Metalifyのアプリは、MT4のバックテスト中に使用します。次に、MetaTrader4の設定を行う必要があります。

---

## MT4の設定を行う

MetalifyアプリをMetaTrader4 (MT4) と連携させるためには、いくつかの設定が必要です。このガイドでは、その設定手順をステップバイステップで詳しく説明します。

### MetaTrader4(MT4)をダウンロードする

> [!CAUTION]
> 現在、[**MetaQuotes社の公式サイト**](https://www.metatrader4.com/ja/download)からMetaTrader4のダウンロードを行うと**MetaTrader5がダウンロードされる**という現象が発生しています。MetaTrader5ではMetalifyアプリは動作しませんので、ご注意ください。
>
> MetaTrader4をダウンロードする場合は**XMTradingやOandaJapanなどのブローカーの公式サイトからダウンロードすること**を推奨します。

### 1. MT4のツール、オプションからDLLを許可する

1. MT4を起動します。
2. メニューバーの上部にある「ツール」をクリックし、ドロップダウンから「オプション」を選択します。
3. オプションウィンドウが表示されるので、「エキスパートアドバイザー」タブをクリックします。
4. その中にある「DLLの使用を許可する」のチェックボックスをオンにします。
5. 「OK」をクリックして設定を保存します。

### 2. MT4データフォルダのパスを取得する

1. MT4のメニューバーの上部にある「ファイル」をクリックします。
2. ドロップダウンメニューから「データフォルダを開く」を選択します。
3. データフォルダがエクスプローラーで開かれるので、アドレスバーのパスをコピーしてメモします。

> [!NOTE]
> アドレスバーがコピーモードにならないときは、アドレスバーの右側の空白部分をクリックしてください。

> [!TIP]
> コピーしたい箇所を右クリックし、「コピーを選択すること(もしくはCtrlを押しながらCを押すこと)」でコピーできます。

### 3. Metalifyアプリの設定を開きメモしたパスを入力する

1. Metalifyアプリを起動します。
2. ヘッダー右上の設定アイコンをクリックし、設定セクションを開きます。
3. MT4のデータフォルダのパス入力欄に、先ほどメモしたパスをペーストします。
4. 正しいパスが入力されると、チェックマークが表示されます。正しくない場合はエラーメッセージが表示されるので、再度パスを確認してください。

> [!TIP]
> ペーストしたい箇所にフォーカスを当てた後、「右クリックしペーストを選択すること(もしくはCtrlを押しながらVを押すこと)」でペーストできます。

### 4. Metalifyアプリの設定から「EAをインストール」をクリックし、MT4にEAをインストールする

1. Metalifyアプリ内の「EAをインストール」ボタンをクリックします。
2. インストールが完了すると、確認のメッセージが表示されます。

### 5. MT4を再起動する

1. MT4を一度閉じます。
2. 再度、MT4を起動します。

### 6. ストラテジーテスターを開きMetalifyEA.ex4を指定しバックテストを実行する

1. MT4の下部にある「ストラテジーテスター」パネルを開きます。
2. 「エキスパートアドバイザー」のドロップダウンから「MetalifyEA.ex4」を選択します。
3. 必要な設定を行い、バックテストを開始するボタンをクリックしてバックテストを実行します。

---

これで、MetalifyアプリとMT4の連携設定は完了です。Metalifyアプリの操作パネルを使って、バックテスト中のチャートの進行や注文の発注、変更などの操作を効率的に行いましょう。
